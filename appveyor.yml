version: {build}
branches:
  only:
  - master
  - release
image: Visual Studio 2017
configuration: Debug
platform: Any CPU
cache:
  - packages -> **\packages.config  # preserve "packages" directory in the root of build folder but will reset it if packages.config is modified
  - '%LocalAppData%\NuGet\Cache'    # NuGet < v3
  - '%LocalAppData%\NuGet\v3-cache' # NuGet v3
before_build:
  - nuget restore
build:
  project: UKSF-Launcher.sln
  verbosity: minimal
artifacts:
  - path: \UKSF-Launcher\bin\Debug\UKSF-Launcher.exe
    name: UKSF-Launcher
  - path: \Updater\bin\Debug\Updater.exe
    name: Updater
  - path: \VersionUpdater\bin\Debug\VersionUpdater.exe
    name: VersionUpdater
deploy:
- provider: FTP
  host: ftp.uk-sf.com
  protocol: ftp
  username: main
  password:
    secure: 1k1dPMXwKdh+kVVv5GxYyA==
  folder: /wamp/www/uksfnew/public/launcher
  artifact: UKSF-Launcher,Updater,VersionUpdater
  on:
    branch: release
after_deploy:
- cmd: '%APPVEYOR_BUILD_FOLDER%\PostDeployment\bin\Debug\PostDeployment.exe'
